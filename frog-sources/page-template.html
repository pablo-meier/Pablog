@;{ I'm... not sure I'm loving how I'm having to implement
    the open graph tags. That said, there's some fun to be
    had reading how Frog is getting its information. Having all of
    Racket here is... something of a power trip.
  }

@(define is-homepage? (string-ci=? uri-path "/index.html"))
@(define is-index-page? (string-prefix? uri-path "/index"))
@(define canned-description "A website where Pablo Meier Pablo Meiers, usually about code, culture, performance, and where they all meet. Also, the life of Pablo Meiers.")
@(define toplevel-url "https://morepablo.com")

<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns#">
  <head>

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-111495904-1"></script>
    <script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'UA-111495904-1');</script>

    <meta charset="utf-8">
    <title>@|title|</title>

    <meta name="author" content="@|author|">
    <meta name="keywords" content="Pablo Meier, @|keywords|">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    @(let* [(appropriate-description (if is-index-page? canned-description description))
            (desc-length (string-length appropriate-description))
            (description-abridged (substring appropriate-description 0 (min desc-length 200)))]
      @list{
    <meta name="description" content="@|description-abridged|">
    <meta property="og:description" content="@|description-abridged|">
    })

    <meta property="og:title" content="@|title|">
    <meta property="og:image" content="https://morepablo.com/img/static/pabloface.png">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:creator" content="@"@"SrPablo">

    @(let [(the-uri (if is-homepage? toplevel-url full-uri))]
      @list{
    <meta property="og:url" content="@|the-uri|">
    <link rel="canonical" href="@|the-uri|">
    })

    @(let [(og-type (if is-index-page? "website" "article"))]
      @list{
    <meta property="og:type" content="@|og-type|">
    })

    <link rel="icon"      href="/favicon.ico?v=2">
    <link rel="stylesheet" type="text/css" href="/css/morepablo.css">
    <link ref="alternate" type="application/rss+xml" href="@|rss-feed-uri|" title="RSS Feed">
  </head>
  <body>

    <!-- It'll come back
    <nav>
      <ul>
          <li><a href="/"><strong>More Pablo</strong></a></li>
          <li>
            <form action="http://www.google.com/search" method="get">
              <input type="hidden" name="q" value="site:morepablo.com" />
              <input id="search-input" type="text" style="border-radius: 5px" name="q" results="0" placeholder="Search"/>
            </form>
          </li>
      </ul>
    </nav> -->

    @(when is-index-page?
        @list{
    <div id="index-header">
      <div id="index-header-row">
        <div id="index-header-synopsis">
          <h1>Pablo Meier</h1>
          <p>I &#9829; people; look for ways to make them happy, and empower them. Historically, this has been connected to software and live performance.</p>
        </div>
        <div>
          <img src="/img/static/pabloface.png" alt="Photo of me, gosh I'm handsome" />
        </div>
      </div>
      <div id="post-row">
        <div id="newest-posts">
            <h2>Newest Posts</h2>
            <ul>
                @|contents|
            </ul>
        </div>
        <div id="favorite-posts">
            <h2>My Favorites</h2>
            <ul>
                <li>Opening up <a href="/2013/10/on-depression-mine.html">on my depression</a> in 2013.</li>
                <li><a href="/2016/08/six-months-of-managing.html">Thoughts on engineering management</a> after my first time doing it.</li>
                <li><a href="/2016/10/programming-interview.html">Thoughts on tech interviews</a> (with a set of juicy links at the bottom).</li>
                <li>Lessons on building my first commercial Android apps (2013, parts <a href="/2014/12/tech-of-sup-android.html">1</a>, <a href="/2014/12/tech-of-sup-android-libraries.html">2</a>, and <a href="/2014/12/tech-of-sup-android-misc.html">3</a>).</li>
                <li>Year in Review (<a href="/2016/01/year-in-review.html">2015</a>, <a href="/2017/06/year-in-review.html">2016</a>, <a href="/2017/12/2017-in-review.html">2017</a>) posts.</li>
            </ul>
        </div>
        <div>
            <h3>More</h3>
            <p>You can read more <a href="/About.html">about me</a>, about <a href="/Engineering.html">my feelings on engineering and management</a>, my <a href="/Performance.html">feelings about arts and live performance</a>. If you like RSS, subscribe to <a href="/feeds/all.rss.xml">the feed!</a></p>
            <p>(If you're really nerdy, read about <a href="/About-Site.html">what powers this site</a>, and/or try opening your JavaScript console!)</p>
        </div>
      </div>
    </div>}
    )
    <div class="content">
      <!-- Main column -->
      @;{ Index pages for posts have @tag that's not #f }
      @(when tag
        @list{<h1>Posts tagged <em>@|tag|</em></h1>})
      @;{ The main page contents are in @contents }
      @(when (not is-index-page?) contents)
    </div>

	<!-- You too
    <footer id="page-footer">
    <div class="row">
        <div class="large-3 small-12 columns">
            <h3>Elsewhere</h3>
            <ul>
                <li><a href="https://www.linkedin.com/in/pablo-meier">LinkedIn</a></li>
                <li><a href="https://www.twitter.com/SrPablo">Twitter</a></li>
                <li><a href="https://www.instagram.com/not.pablo">Instagram</a></li>
                <li><a href="https://www.github.com/pablo-meier">GitHub</a></li>
                <li><a href="https://www.facebook.com/paul.meier">Facebook</a></li>
                <li><a href="https://www.twitch.tv/sicp">Twitch.tv</a></li>
            </ul>
        </div>
        <div class="large-6 small-12 columns">
            <h3>Copyright</h3>
            <p><em><span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">More Pablo</span> by 
      <a xmlns:cc="http://creativecommons.org/ns#" href="https://morepablo.com" property="cc:attributionName" rel="cc:attributionURL">Pablo Meier</a> 
        is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.</em> This likely won't do much to protect any of my "valuable" "work." But if you take anything from this blog that I made, please just
    be cool and attribute it, and allow it to be shared by others.</p>
        </div>
        <div class="large-3 small-12 columns show-for-large">
          <h3>Under Construction</h3>
          <table>
              <tr>
                  <td><img src="/img/static/construction.gif" alt="Under construction!" /></td>
                  <td><img src="/img/static/construction.gif" alt="Under construction!" /></td>
                  <td><img src="/img/static/construction.gif" alt="Under construction!" /></td>
              </tr>
              <tr>
                  <td><img src="/img/static/construction.gif" alt="Under construction!" /></td>
                  <td><img src="/img/static/construction.gif" alt="Under construction!" /></td>
                  <td><img src="/img/static/construction.gif" alt="Under construction!" /></td>
              </tr>
              <tr>
                  <td><img src="/img/static/construction.gif" alt="Under construction!" /></td>
                  <td><img src="/img/static/construction.gif" alt="Under construction!" /></td>
                  <td><img src="/img/static/construction.gif" alt="Under construction!" /></td>
              </tr>
          </table>
        </div>
    </div>
    </footer>
	-->

    <script async type="text/javascript">
      const goatStyles = 'color: #aaa; font-size: 14px;';
      const titleStyles = 'text-align: center; font-weight: bold; font-size: 25px; color: #222';
      const spacer = '                               ';
      const goatSpacer = '                                                          ';

      const printGoatLine = (line) => {
        console.log("%c" + goatSpacer + line, goatStyles);
      };

      console.log(`%c${spacer}Goat commends openers of the console`, titleStyles);

      printGoatLine('');
      printGoatLine('       / /');
      printGoatLine('    (\\/_//`)');
      printGoatLine("     /   '/");
      printGoatLine('    0  0   \\ ');
      printGoatLine('   /        \\ ');
      printGoatLine('  /    __/   \\ ');
      printGoatLine(' /,  _/ \     \\_');
      printGoatLine(' `-./ )  |     ~^~^~^~^~^~^~^~\\~.');
      printGoatLine('     (   /                     \\_}');
      printGoatLine('        |               /      |');
      printGoatLine('        ;     |         \\      /');
      printGoatLine('         \\/ ,/           \\    |');
      printGoatLine('         / /~~|~|~~~~~~|~|\\   |');
      printGoatLine('        / /   | |      | | `\\ \\ ');
      printGoatLine('       / /    | |      | |   \\ \\ ');
      printGoatLine('      / (     | |      | |    \\ \\ ');
      printGoatLine('     /,_)    /__)     /__)   /,_/');
      printGoatLine(String.raw`'''''"""""'''""""""'''""""""''"""""''''`);
      printGoatLine('');
      console.log(`%c${spacer}ASCII art credit: http://www.ascii-art.de/ascii/ghi/goat.txt`, 'text-align: right; color: #111; font-size: 16px');
    </script>
  </body>
</html>

@;{ I'm... not sure I'm loving how I'm having to implement
    the open graph tags. That said, there's some fun to be
    had reading how Frog is getting its information. Having all of
    Racket here is... something of a power trip.
  }

@(define is-homepage? (string-ci=? uri-path "/index.html"))
@(define canned-description "A website where Pablo Meier Pablo Meiers, usually about code, culture, performance, and where they all meet. Also, the life of Pablo Meiers.")
@(define toplevel-url "https://morepablo.com")

<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns#">
  <head>

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-111495904-1"></script>
    <script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'UA-111495904-1');</script>

    @;{ The at-exp reader for a template treats this as a comment.
        Also, notice the use template variables like @title,
        @description etc. }
    <meta charset="utf-8">
    <title>@|title|</title>

    <meta name="author" content="@|author|">
    <meta name="keywords" content="Pablo Meier, @|keywords|">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    @(let* [(appropriate-description (if is-homepage? canned-description description))
            (desc-length (string-length appropriate-description))
            (description-abridged (substring appropriate-description 0 (min desc-length 200)))]
      @list{
    <meta name="description" content="@|description-abridged|">
    <meta property="og:description" content="@|description-abridged|">
    })

    <meta property="og:title" content="@|title|">
    <meta property="og:image" content="https://morepablo.com/img/static/pabloface.png">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:creator" content="@"@"SrPablo">

    @(let [(the-uri (if is-homepage? toplevel-url full-uri))]
      @list{
    <meta property="og:url" content="@|the-uri|">
    <link rel="canonical" href="@|the-uri|">
    })

    @(let [(og-type (if is-homepage? "website" "article"))]
      @list{
    <meta property="og:type" content="@|og-type|">
    })

    <link rel="icon"      href="/favicon.ico?v=2">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/foundation/6.2.3/foundation.min.css">
    <link href="https://fonts.googleapis.com/css?family=Mitr|Raleway" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="/css/morepablo.css">
    <link ref="alternate" type="application/rss+xml" href="@|rss-feed-uri|" title="RSS Feed">
  </head>
  <body>

    <div class="top-bar">
      <div class="top-bar-title">
         <span data-responsive-toggle="responsive-menu" data-hide-for="medium">
           <button class="menu-icon dark" type="button" data-toggle></button>
         </span>
         <a href="/"><strong>More Pablo</strong></a>
      </div>
      <div id="responsive-menu">
        <div class="top-bar-left">
          <ul class="dropdown menu" data-dropdown-menu>
            <li class="menu-text"></li>
            <li>
              <a href="#">Tags</a>
              <ul class="menu vertical">
                @|tags-list-items|
              </ul>
            </li>
            <li><a href="/About.html">About (Me)</a></li>
            <li><a href="/Engineering.html">Engineering</a></li>
            <li><a href="/Performance.html">Performance</a></li>
            <li><a href="/About-Site.html">About (Site)</a></li>
          </ul>
        </div>
        <div class="top-bar-right">
          <ul class="menu">
            <li>
              <form action="http://www.google.com/search" method="get">
                <input type="hidden" name="q" value="site:www.morepablo.com" />
                <input id="search-input" type="text" style="border-radius: 5px" name="q" results="0" placeholder="Search"/>
              </form>
            </li>
          </ul>
        </div>
      </div>
    </div>
    @(when is-homepage?
        @list{
    <div id="index-header">
      <div id="index-header-row" class="row">
        <div id="index-header-synopsis" class="small-12 large-6 columns">
          <h1>Pablo Meier</h1>
          <p>I &#9829; people; look for ways to make them happy, and empower them. Historically, this has been connected to software and live performance.</p>
        </div>
        <div class="small-12 large-6 columns">
          <img src="/img/static/pabloface.png" alt="Photo of me, gosh I'm handsome" />
        </div>
      </div>
    </div>}
    )
    <div class="row content">
      <!-- Main column -->
      <div class="column">
        @;{ Index pages for posts have @tag that's not #f }
        @(when tag
          @list{<h1>Posts tagged <em>@|tag|</em></h1>})
        @;{ The main page contents are in @contents }
        @|contents|
      </div>
    </div>
    <footer id="page-footer">
    <div class="row">
        <div class="large-3 small-12 columns">
            <h3>Connect, Follow, 'Encircle'</h3>
            <ul>
                <li><a href="https://www.twitter.com/SrPablo">Twitter</a></li>
                <li><a href="https://www.instagram.com/not.pablo">Instagram</a></li>
                <li><a href="https://www.github.com/pablo-meier">GitHub</a></li>
                <li><a href="https://www.facebook.com/paul.meier">Facebook</a></li>
                <li><a href="https://google.com/+PaulMeier">G+</a></li>
                <li><a href="https://www.twitch.tv/sicp">Twitch.tv</a></li>
            </ul>
        </div>
        <div class="large-6 small-12 columns">
            <h3>Copyright</h3>
            <p><em><span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">More Pablo</span> by 
      <a xmlns:cc="http://creativecommons.org/ns#" href="http://www.morepablo.com" property="cc:attributionName" rel="cc:attributionURL">Pablo Meier</a> 
        is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.</em> This likely won't do much to protect any of my "valuable" "work." But if you take anything from this blog that I made, please just
    be cool and attribute it, and allow it to be shared by others.</p>
        </div>
        <div class="large-3 small-12 columns show-for-large">
          <h3>Under Construction</h3>
          <table>
              <tr>
                  <td><img src="/img/static/construction.gif" alt="Under construction!" /></td>
                  <td><img src="/img/static/construction.gif" alt="Under construction!" /></td>
                  <td><img src="/img/static/construction.gif" alt="Under construction!" /></td>
              </tr>
              <tr>
                  <td><img src="/img/static/construction.gif" alt="Under construction!" /></td>
                  <td><img src="/img/static/construction.gif" alt="Under construction!" /></td>
                  <td><img src="/img/static/construction.gif" alt="Under construction!" /></td>
              </tr>
              <tr>
                  <td><img src="/img/static/construction.gif" alt="Under construction!" /></td>
                  <td><img src="/img/static/construction.gif" alt="Under construction!" /></td>
                  <td><img src="/img/static/construction.gif" alt="Under construction!" /></td>
              </tr>
          </table>
        </div>
    </div>
    </footer>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/foundation/6.2.1/foundation.min.js"></script>
    <script type="text/javascript"> $(document).foundation(); </script>
    <script async type="text/javascript">
      const goatStyles = 'color: #aaa; font-size: 14px;';
      const titleStyles = 'text-align: center; font-weight: bold; font-size: 25px; color: #222';
      const spacer = '                               ';
      const goatSpacer = '                                                          ';

      const printGoatLine = (line) => {
        console.log("%c" + goatSpacer + line, goatStyles);
      };

      console.log(`%c${spacer}Goat commends openers of the console`, titleStyles);

      printGoatLine('');
      printGoatLine('       / /');
      printGoatLine('    (\\/_//`)');
      printGoatLine("     /   '/");
      printGoatLine('    0  0   \\ ');
      printGoatLine('   /        \\ ');
      printGoatLine('  /    __/   \\ ');
      printGoatLine(' /,  _/ \     \\_');
      printGoatLine(' `-./ )  |     ~^~^~^~^~^~^~^~\\~.');
      printGoatLine('     (   /                     \\_}');
      printGoatLine('        |               /      |');
      printGoatLine('        ;     |         \\      /');
      printGoatLine('         \\/ ,/           \\    |');
      printGoatLine('         / /~~|~|~~~~~~|~|\\   |');
      printGoatLine('        / /   | |      | | `\\ \\ ');
      printGoatLine('       / /    | |      | |   \\ \\ ');
      printGoatLine('      / (     | |      | |    \\ \\ ');
      printGoatLine('     /,_)    /__)     /__)   /,_/');
      printGoatLine(String.raw`'''''"""""'''""""""'''""""""''"""""''''`);
      printGoatLine('');
      console.log(`%c${spacer}ASCII art credit: http://www.ascii-art.de/ascii/ghi/goat.txt`, 'text-align: right; color: #111; font-size: 16px');
    </script>
  </body>
</html>

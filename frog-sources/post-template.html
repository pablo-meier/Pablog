@(define (month-word int)
  (cond
    [(= 1 int) "January"]
    [(= 2 int) "February"]
    [(= 3 int) "March"]
    [(= 4 int) "April"]
    [(= 5 int) "May"]
    [(= 6 int) "June"]
    [(= 7 int) "July"]
    [(= 8 int) "August"]
    [(= 9 int) "September"]
    [(= 10 int) "October"]
    [(= 11 int) "November"]
    [(= 12 int) "December"]))

<article class="post">
  <header>
    <h1>@|title|</h1>
    @(let* ([month (month-word (date-month date-struct))]
            [day (date-day date-struct)]
            [year (date-year date-struct)]
            [date-formatted (format "~a ~a, ~a" month day year)])
      @list{
        <p>@|date-formatted| :: Tagged under: @|tags|</p>
    })
  </header>
  @(let* ([this-year (date-year (seconds->date (* 0.001 (current-inexact-milliseconds))))]
          [is-old? (> (- this-year (date-year date-struct)) 2)])
    (when is-old?
      @list{
      <hr />
      <p><strong>Hey! Thanks for reading! Just a reminder that I wrote this some years ago, and may have much more complicated feelings about this topic than I did when I wrote it. Happy to elaborate, feel free to reach out to me! ðŸ˜„</strong></p>
      <hr />
    }))

  @|content|
  <footer>
	<hr />
    @older/newer-links[older-uri older-title newer-uri newer-title]
	<hr />
  </footer>

  <section>
    <p style="text-align: center; font-size: small;"><strong>Thanks for the read!</strong> Disagreed? <em>Violent agreement!?</em> Feel free to drop me a line at <span id="contact-mail"></span>, or leave a comment below! I'd love to hear from you ðŸ˜„</p>
    <script>
(function() {
  /** Hopefully this trick still works. */
  function rot13(str) {
    var input =  'abcdefghijklmnopqrstuvwxyz&>!';
    var output = 'nopqrstuvwxyzabcdefghijklm@"@".:';
    var index = x => input.indexOf(x);
    var translate = x => index(x) > -1 ? output[index(x)] : x;
    return str.split('').map(translate).join('');
  }

  const email_obs = 'cnoyb>n>zrvre&tznvy>pbz';
  const email_plaintext = rot13(email_obs);

  const mailElem = document.createElement('a');
  const textNodeElem = document.createTextNode(email_plaintext);
  mailElem.setAttribute('href', rot13('znvygb!') + email_plaintext);
  mailElem.appendChild(textNodeElem);
  document.getElementById('contact-mail').appendChild(mailElem);
})();
    </script>
    <div id='discourse-comments'></div>
    <script type="text/javascript">
      DiscourseEmbed = { discourseUrl: 'https://us.morepablo.com/',
                         discourseEmbedUrl: '@|full-uri|' };

      (function() {
        var d = document.createElement('script'); d.type = 'text/javascript'; d.async = true;
        d.src = DiscourseEmbed.discourseUrl + 'javascripts/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(d);
      })();
    </script>
  </section>
</article>
